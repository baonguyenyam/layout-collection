"use strict";function getViewIMG(){$.get("/view/getimg/"+window.location.pathname.split("/")[2],function(n){var t=JSON.parse(n).lists;$("#pagination-container").pagination({dataSource:t,pageSize:20,className:"paginationjs-theme-info",callback:function(n,t){var e=simpleTemplating(n);$("#view-container").html(e),$("#view-container [data-fancybox]").fancybox({buttons:["zoom","share","slideShow","fullScreen","download","thumbs","close"],youtube:{controls:0,showinfo:0},afterLoad:function(n,t){t.width=t.$image[0].naturalWidth,t.height=t.$image[0].naturalHeight}}),IMGResponsive();var o=new Freewall("#view-container");o.reset({selector:".item",animate:!0,cellW:$(window).width()<=768?200:220,cellH:"auto",onResize:function(){o.fitWidth()}}),o.fitWidth(),$(window).trigger("resize")}})})}function shuffle(n){for(var t,e,o=n.length;0!==o;)e=Math.floor(Math.random()*o),t=n[o-=1],n[o]=n[e],n[e]=t;return n}function simpleTemplating(n){var e="";return $.each(n,function(n,t){e+='<a data-fancybox="fb_'+window.location.pathname.split("/")[2]+'" href="/img/'+window.location.pathname.split("/")[2]+"/"+t+'" class="item"><img src="/img/'+window.location.pathname.split("/")[2]+"/"+t+'" /></a>'}),e+=""}function openPreview(n){$("#download").show();var t=$(n).find(".item").attr("bg-img");$(".preview .box").css({"background-position":"top left","background-size":"auto","background-image":"url("+t+")"}),$("#download").attr("data-down",t)}$(document).ready(function(){getViewIMG(),$("#download").on("click",function(){var t=new XMLHttpRequest,e=$(this).attr("data-down");t.open("GET",e,!0),t.responseType="blob",t.onload=function(n){download(t.response,e,"image/*")},t.send()})});